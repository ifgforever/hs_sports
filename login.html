<!doctype html>
<html>
<head>
  <meta charset="utf-8">
  <title>Login</title>
</head>
<body>

<h2>Login</h2>

<input id="username" placeholder="Username"><br><br>
<input id="password" type="password" placeholder="Password"><br><br>

<button id="login">Login</button>
<p id="msg"></p>

<script src="/app.js"></script>
<script>
document.querySelector("#login").onclick = async () => {
  document.querySelector("#msg").textContent = "";
  try {
    const res = await APP.api("/api/auth/login", {
      method: "POST",
      body: JSON.stringify({
        username: username.value,
        password: password.value
      })
    });
    APP.token = res.token;
    location.href = "/missions.html";
  } catch (e) {
    msg.textContent = e.message;
  }
};
</script>

</body>
</html>
